

<div id="display1_header">
  <div class="text-large" style="float:left; width:125px;"><%= image_tag "logo_seti.png" %></div>
  <div class="text-title" style="float:left; height:65px; vertical-align:bottom;">What We are Currently Scanning</div>
  <div class="float-wall"></div>
</div>

<div id="beam_row">
  <div style="float:left;">Observation History</div>
  <div style="float:left; padding-left:5px;">
    <div style="float:left;"><%= render 'waterfall', :waterfall => @waterfall1 %></div>
    <div style="float:left; padding-left:5px;"><%= render 'baseline', :baseline => @baseline1 %></div>
    <div class="float-wall"></div>

    <div class="text-large" style="float:left;">Beam 1</div>
  </div>
  <div class="float-wall"></div>
</div>

<div id="beam_row">
  <div style="float:left;">Observation History</div>
  <div style="float:left; padding-left:5px;">
    <div style="float:left;"><%= render 'waterfall', :waterfall => @waterfall2 %></div>
    <div style="float:left; padding-left:5px;"><%= render 'baseline', :baseline => @baseline1 %></div>
    <div class="float-wall"></div>

    <div class="text-large" style="float:left;">Beam 2</div>
  </div>
  <div class="float-wall"></div>
</div>

<div id="beam_row">
  <div style="float:left;">Observation History</div>
  <div style="float:left; padding-left:5px;">
    <div style="float:left;"><%= render 'waterfall', :waterfall => @waterfall3 %></div>
    <div style="float:left; padding-left:5px;"><%= render 'baseline', :baseline => @baseline1 %></div>
    <div class="float-wall"></div>

    <div class="text-large" style="float:left;">Beam 3</div>
  </div>
  <div class="float-wall"></div>
</div>

<script type="text/javascript">
  // AJAX call to update JSON
  function updateWaterfall(id)
  {
      if(updateWaterfall.waterfall_data == undefined)
      {
         updateWaterfall.waterfall_data = new Array();
      }

      if(updateWaterfall.waterfall_data[id] == undefined)
      {
        updateWaterfall.waterfall_data[id] = {data:"", last_row:1};
      }

      // Take id and make AJAX query
      $.ajax({
        type:'GET',
        url:'/display1/waterfall',
        data:{id:id, start_row:updateWaterfall.waterfall_data[id].last_row},
        success:function(){
          // We should update the watefall display here
        },
        error:function(){
          // We should handle error here
        },
        datatype:"json"
      });
  }

  // Register waterfall display for automatic updates
  $(document).ready(function(){
    registerElementTimer(function(){updateWaterfall(1);},10000);
  });

</script>